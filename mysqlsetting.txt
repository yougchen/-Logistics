CREATE DATABASE logistics;

use logistics;

CREATE TABLE member
(
    mem_id int auto_increment unique,
    mem_name varchar(15) not null,
    mem_phone varchar(10) not null,
    mem_address varchar(35) not null,
    mem_email varchar(35) not null,
    mem_account_num varchar(15) not null,
    mem_password varchar(35) not null,
    manager_right int not null,
    mem_birth datetime not null,
    mem_career varchar(8) not null,
    mem_gender varchar(4) not null,
    PRIMARY KEY(mem_id)
 );
 
ALTER TABLE `member` CHANGE `mem_name` `mem_name` VARCHAR(15) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL;
ALTER TABLE `member` CHANGE `mem_address` `mem_address` VARCHAR(35) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL;
ALTER TABLE `member` CHANGE `mem_account_num` `mem_account_num` VARCHAR(15) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL; 
ALTER TABLE `member` CHANGE `mem_career` `mem_career` VARCHAR(8) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL;
ALTER TABLE `member` CHANGE `mem_gender` `mem_gender` VARCHAR(4) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL;


CREATE TABLE invoice
(
    inv_id int not null unique,
    receiver_name varchar(15) not null,
    receiver_phone varchar(8) not null,
    receiver_email varchar(35) not null,
    arrive_time datetime not null,
    arrive_address varchar(35) not null,
    send_time datetime not null,
    total_price float(8) not null,
    if_success int(1), 
    mem_id int not null,
    PRIMARY KEY(inv_id),
    FOREIGN KEY(mem_id) REFERENCES logistics.member(mem_id) ON UPDATE CASCADE
);
 
ALTER TABLE `invoice` CHANGE `receiver_name` `receiver_name` VARCHAR(15) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL;
ALTER TABLE `invoice` CHANGE `arrive_address` `arrive_address` VARCHAR(35) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL;


 CREATE TABLE package
(
    pac_id int not null unique,
    pac_type varchar(15) not null,
    pac_length int not null,
    pac_width int not null,
    pac_height int not null,
    pac_weight int not null,
    pac_delivery_method varchar(15) not null,
    pac_price float(8) not null,
    inv_id int not null,
    PRIMARY KEY(pac_id),
    FOREIGN KEY(inv_id) REFERENCES logistics.invoice(inv_id) ON UPDATE CASCADE
);

ALTER TABLE `package` CHANGE `pac_type` `pac_type` VARCHAR(15) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL;
ALTER TABLE `package` CHANGE `pac_delivery_method` `pac_delivery_method` VARCHAR(15) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL;

